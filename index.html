<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
  <title>胡武强 - Technical Art</title>
  <link rel="shortcut icon" href="/theme-img/icon.jpg">
  <link rel='manifest' href='/manifest.json'>
  <link rel="stylesheet" href="/css/var.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/typography.css">
  <link rel="stylesheet" href="/css/nav.css">
  <link rel="stylesheet" href="/css/index.css">
  <meta name="generator" content="Hexo 5.4.0">
</head>
    
<body class="homepage">
    <!-- 语言切换按钮 -->
    <div class="lang-switcher">
        <button class="lang-btn active" data-lang="zh-CN">中</button>
        <span class="lang-divider">/</span>
        <button class="lang-btn" data-lang="en">EN</button>
    </div>

    <!-- 背景图切换容器（由配置文件动态生成） -->
    <div class="hero-background" id="hero-background"></div>

    <!-- 居中卡片 -->
    <div class="hero-card">
        <div class="card-content">
            <p class="card-subtitle" data-i18n="subtitle">技术美术 - 实时渲染 / 工具开发</p>
            <h1 class="card-title" data-i18n="name">胡武强</h1>
            <div class="card-info">
                <p class="card-links">
                    <a href="/demo" data-i18n="links.demo">演示项目</a> | <a href="/archives" data-i18n="links.articles">技术文章</a>
                </p>
                <p class="card-tags" data-i18n="tags">Unity • Unreal Engine • Houdini • Shader</p>
            </div>
            <div class="card-buttons">
                <a href="/demo" class="btn" data-i18n="buttons.games">作品</a>
                <a href="/resume" class="btn" data-i18n="buttons.resume">简历</a>
            </div>
        </div>
    </div>

    <!-- 底部社交图标 -->
    <div class="social-footer">
        <a href="https://github.com/GongShengs" target="_blank" class="social-icon" title="GitHub">
            <img src="/theme-img/github-mark-light.png" alt="GitHub">
        </a>
        <a href="https://www.artstation.com/ub010b709" target="_blank" class="social-icon" title="ArtStation">
            <img src="/theme-img/artstation_logo_dark.png" alt="ArtStation" style="filter: invert(1);">
        </a>
        <a href="https://www.zhihu.com/people/_gongsheng" target="_blank" class="social-icon" title="知乎">
            <img src="/theme-img/zhihu_logo_dark.png" alt="知乎" style="filter: invert(1);">
        </a>
    </div>

    <!-- 背景切换指示器（由配置文件动态生成） -->
    <div class="bg-indicators" id="bg-indicators"></div>

    <script src="/js/main.js"></script>
    <script>
        // 背景图片管理（从配置文件加载）
        (function() {
            const bgContainer = document.getElementById('hero-background');
            const dotsContainer = document.getElementById('bg-indicators');
            let slides = [];
            let dots = [];
            let current = 0;
            let autoPlayTimer = null;
            let config = { interval: 5000, transition: 1000 };

            // 加载背景配置
            async function loadBackgrounds() {
                try {
                    const response = await fetch('/js/config/backgrounds.json');
                    const data = await response.json();
                    config = { ...config, ...data };
                    
                    // 设置过渡时间
                    document.documentElement.style.setProperty('--bg-transition', `${config.transition}ms`);
                    
                    // 生成背景图和指示器
                    createSlides(data.backgrounds);
                    
                    // 开始自动播放
                    startAutoPlay();
                } catch (e) {
                    console.error('Failed to load backgrounds config:', e);
                    // 降级：使用默认背景
                    createSlides([{ url: '/theme-img/background.jpg', name: '默认' }]);
                }
            }

            // 创建幻灯片和指示器
            function createSlides(backgrounds) {
                bgContainer.innerHTML = '';
                dotsContainer.innerHTML = '';
                slides = [];
                dots = [];

                backgrounds.forEach((bg, index) => {
                    // 创建背景 slide
                    const slide = document.createElement('div');
                    slide.className = 'bg-slide' + (index === 0 ? ' active' : '');
                    slide.style.backgroundImage = `url('${bg.url}')`;
                    bgContainer.appendChild(slide);
                    slides.push(slide);

                    // 创建指示器点
                    const dot = document.createElement('span');
                    dot.className = 'bg-dot' + (index === 0 ? ' active' : '');
                    dot.dataset.index = index;
                    dot.title = bg.name || `背景 ${index + 1}`;
                    dot.addEventListener('click', () => showSlide(index));
                    dotsContainer.appendChild(dot);
                    dots.push(dot);
                });
            }

            // 显示指定幻灯片
            function showSlide(index) {
                if (index < 0 || index >= slides.length) return;
                
                slides.forEach((slide, i) => {
                    slide.classList.toggle('active', i === index);
                });
                dots.forEach((dot, i) => {
                    dot.classList.toggle('active', i === index);
                });
                current = index;
            }

            // 开始自动播放
            function startAutoPlay() {
                if (slides.length <= 1) return;
                
                autoPlayTimer = setInterval(() => {
                    const next = (current + 1) % slides.length;
                    showSlide(next);
                }, config.interval);
            }

            // 初始化
            loadBackgrounds();
        })();

        // 多语言切换
        (function() {
            const langBtns = document.querySelectorAll('.lang-btn');
            let currentLang = localStorage.getItem('lang') || 'zh-CN';
            let i18nData = {};

            async function loadLang(lang) {
                try {
                    const response = await fetch(`/js/i18n/${lang}.json`);
                    i18nData = await response.json();
                    applyLang();
                    localStorage.setItem('lang', lang);
                    currentLang = lang;
                    
                    langBtns.forEach(btn => {
                        btn.classList.toggle('active', btn.dataset.lang === lang);
                    });
                    
                    document.documentElement.lang = lang;
                    document.title = i18nData.title;
                } catch (e) {
                    console.error('Failed to load language:', e);
                }
            }

            function applyLang() {
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.dataset.i18n;
                    const value = getNestedValue(i18nData, key);
                    if (value) {
                        el.textContent = value;
                    }
                });
            }

            function getNestedValue(obj, key) {
                return key.split('.').reduce((o, k) => (o || {})[k], obj);
            }

            langBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    loadLang(btn.dataset.lang);
                });
            });

            loadLang(currentLang);
        })();
    </script>
</body>
</html>
